# QuantArbitrage 平台开发 TODO

## 核心功能模块

### 1. 实时价差监控仪表盘
- [x] 设计仪表盘布局与配色方案
- [x] 实现币安XAUUSDT实时价格展示
- [x] 实现Bybit MT5 XAUUSD.s实时价格展示
- [x] 计算并展示实时价差
- [x] 绘制价差曲线图表
- [x] 展示套利机会识别
- [x] 系统健康状态指示器
- [ ] 实时数据更新机制

### 2. 多账户管理系统
- [x] 设计账户数据模型
- [x] 实现账户创建/编辑/删除API
- [x] 币安API密钥管理界面
- [x] Bybit/MT5登录凭证管理界面
- [ ] 账户池配置管理
- [x] 账户状态监控
- [x] 一人多账户支持
- [ ] 多租户隔离机制

### 3. 策略配置与控制
- [ ] 设计策略配置表单
- [x] 套利阈值参数配置
- [x] 风控参数配置（最大持仓、止损线等）
- [x] 资金费率配置
- [x] 策略启动/停止/重启功能
- [ ] 策略状态实时显示
- [ ] 策略参数验证逻辑

### 4. 风控监控视图
- [ ] 保证金占用率实时展示
- [ ] 未对冲风险敞口计算
- [ ] 最大回撤追踪
- [ ] 连续亏损次数统计
- [ ] 风控指标仪表盘
- [ ] 风控告警阈值设置
- [ ] 风控历史记录

### 5. 交易历史与绩效分析
- [ ] 历史订单列表展示
- [ ] 成交记录详情
- [ ] 持仓快照查询
- [ ] 收益率计算
- [ ] 夏普比率计算
- [ ] 胜率统计
- [ ] 交易分析图表
- [ ] 数据导出功能

### 6. MT5实例健康监控
- [ ] MT5连接状态监控
- [ ] 进程健康度检查
- [ ] 自动重启机制
- [ ] 手动干预界面
- [ ] 健康检查日志
- [ ] 实例列表展示

### 7. 系统架构演进管理
- [ ] 系统阶段识别（MVP/小规模/规模化/企业级）
- [ ] 当前阶段展示
- [ ] 扩展建议提示
- [ ] 性能指标展示
- [ ] 演进路线图可视化

### 8. 告警与通知中心
- [ ] 告警消息存储
- [ ] 告警列表展示
- [ ] 告警分类（系统/风控/账户）
- [ ] 告警详情查看
- [ ] 多渠道推送配置
- [ ] 通知历史记录

### 9. 用户认证与权限管理
- [ ] 基于角色的访问控制（RBAC）
- [ ] 管理员角色权限
- [ ] 交易员角色权限
- [ ] 观察员角色权限
- [ ] 多租户数据隔离
- [ ] 操作审计日志

### 10. 技术文档与部署指南
- [ ] 平台架构文档展示
- [ ] 部署流程文档
- [ ] 最佳实践指南
- [ ] 故障排查指南
- [ ] API文档
- [ ] 配置说明文档

## 基础设施与数据库

- [x] 设计完整的数据库Schema
- [x] 实现账户表（accounts）
- [x] 实现策略表（strategies）
- [x] 实现订单表（orders）
- [x] 实现持仓表（positions）
- [x] 实现风控规则表（risk_rules）
- [x] 实现告警表（alerts）
- [x] 实现MT5实例表（mt5_instances）
- [x] 实现绩效指标表（performance_metrics）
- [x] 数据库迁移脚本

## API接口

- [x] 账户管理API
- [x] 策略管理API
- [x] 实时行情API
- [x] 订单执行API
- [ ] 风控查询API
- [x] 告警查询API
- [ ] MT5健康检查API
- [ ] 绩效分析API
- [x] 系统状态API

## 前端UI组件

- [x] 仪表盘布局组件
- [x] 价格展示组件
- [x] 图表组件（价差曲线）
- [x] 账户列表组件
- [ ] 策略配置表单组件
- [ ] 风控指标卡片组件
- [x] 告警通知组件
- [ ] 数据表格组件
- [ ] 权限控制组件

## 测试与优化

- [ ] 单元测试编写
- [ ] 集成测试编写
- [ ] 性能测试
- [ ] 压力测试
- [ ] 代码审查
- [ ] 安全审计

## 部署与交付

- [ ] 生产环境配置
- [ ] Docker容器化
- [ ] 部署脚本编写
- [ ] 监控告警配置
- [ ] 文档完善
- [ ] 最终交付


## WebSocket 实时数据推送

- [x] 后端 WebSocket服务器实现
- [x] 币安XAUUSDT价格数据源集成
- [x] Bybit MT5 XAUUSD.s价格数据源集成
- [x] 实时价差计算引擎
- [x] WebSocket消息格式定义
- [x] 客户端连接管理（连接、重连、断开）
- [x] 心跳检测机制
- [x] 前端 WebSocket客户端实现
- [x] 实时图表数据更新
- [x] 数据缓冲和节流机制
- [x] 错误处理和恢复
- [x] 性能优化（内存管理、数据去重）
- [x] WebSocket单元测试


## 真实交易所数据源集成

- [x] 币安API客户端实现
- [x] Bybit API客户端实现
- [x] 币安XAUUSDT价格数据获取
- [x] Bybit XAUUSD.s价格数据获取
- [x] 数据缓存机制
- [x] 故障转移和重试逻辑
- [x] API限制处理
- [x] 数据验证和清洗
- [x] 实时数据推送集成
- [x] 数据源监控和日志
- [x] 真实数据源单元测试
- [ ] 集成测试和验证


## API密钥管理系统

- [ ] 数据库表设计（api_keys、audit_logs）
- [ ] 密钥加密和解密实现
- [ ] 后端API密钥CRUD接口
- [ ] 密钥验证和测试接口
- [ ] 审计日志记录系统
- [ ] 前端密钥配置页面
- [ ] 密钥添加/编辑/删除表单
- [ ] 密钥测试功能UI
- [ ] 权限控制（仅管理员）
- [ ] 密钥加密存储单元测试
- [ ] API接口单元测试
- [ ] 集成测试
